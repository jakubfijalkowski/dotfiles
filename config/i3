set $mod Mod4
set $scripts ~/.local/bin/scripts

font pango:Source Code Pro 14

set_from_resource $primary "screens.primary" "DP-1"
set_from_resource $secondary "screens.secondary" "eDP-1"

default_border none
default_floating_border normal

focus_follows_mouse no
workspace_auto_back_and_forth yes

smart_gaps on
gaps outer 0
gaps inner 3

bindsym $mod+r exec rofi -show run
bindsym Hyper_L exec rofi -show combi
bindsym $mod+Return exec alacritty

bindsym $mod+q kill

# Focus
bindsym $mod+h     focus left
bindsym $mod+j     focus down
bindsym $mod+k     focus up
bindsym $mod+l     focus right
bindsym $mod+Left  focus left
bindsym $mod+Down  focus down
bindsym $mod+Up    focus up
bindsym $mod+Right focus right

# Moving windows
bindsym $mod+Shift+h     move left
bindsym $mod+Shift+j     move down
bindsym $mod+Shift+k     move up
bindsym $mod+Shift+l     move right
bindsym $mod+Shift+Left  move left
bindsym $mod+Shift+Down  move down
bindsym $mod+Shift+Up    move up
bindsym $mod+Shift+Right move right

# Moving workspaces
bindsym $mod+Mod1+h     move workspace to output left
bindsym $mod+Mod1+j     move workspace to output down
bindsym $mod+Mod1+k     move workspace to output up
bindsym $mod+Mod1+l     move workspace to output right
bindsym $mod+Mod1+Left  move workspace to output left
bindsym $mod+Mod1+Down  move workspace to output down
bindsym $mod+Mod1+Up    move workspace to output up
bindsym $mod+Mod1+Right move workspace to output right

# Switch to workspace
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# Fullscreen
bindsym $mod+f fullscreen toggle

# Change layouts
bindsym $mod+e split h
bindsym $mod+d split v
bindsym $mod+c layout toggle split

# Move focus
bindsym $mod+w focus parent
bindsym $mod+s focus child

# Floating
floating_modifier $mod
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle

# Functional keys
bindsym XF86AudioRaiseVolume exec amixer -q set Master 5%+ unmute
bindsym XF86AudioLowerVolume exec amixer -q set Master 5%- unmute
bindsym XF86AudioMute exec amixer -q set Master toggle

bindsym XF86AudioPrev exec $scripts/music_control prev
bindsym XF86AudioNext exec $scripts/music_control next
bindsym XF86AudioPlay exec $scripts/music_control toggle

bindsym XF86MonBrightnessUp exec $scripts/change_brightness up
bindsym XF86MonBrightnessDown exec $scripts/change_brightness down

# Screenshots
bindsym --release Print exec maim ~/Pictures/Screenshots/$(date +%s).png
bindsym --release Shift+Print exec maim -s ~/Pictures/Screenshots/$(date +%s).png

# Other
bindsym Mod1+F7 exec --no-startup-id $scripts/toggle_touchpad

# Resizing
set $mode_resize Resize
bindsym $mod+Shift+r mode "$mode_resize"
mode "$mode_resize" {
    bindsym h     resize shrink width  10 px or 10 ppt
    bindsym j     resize grow   height 10 px or 10 ppt
    bindsym k     resize shrink height 10 px or 10 ppt
    bindsym l     resize grow   width  10 px or 10 ppt
    bindsym Left  resize shrink width  10 px or 10 ppt
    bindsym Down  resize grow   height 10 px or 10 ppt
    bindsym Up    resize shrink height 10 px or 10 ppt
    bindsym Right resize grow   width  10 px or 10 ppt

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

set $mode_actions Actions: (w)avebox (c)hrome co(d)e fil(e)s (l)ock
bindsym $mod+a mode "$mode_actions"
mode "$mode_actions" {
    bindsym c workspace number 1; exec chromium; mode "default"
    bindsym d workspace number 3; exec code; mode "default"
    bindsym e exec nautilus; mode "default"
    bindsym w [class="wavebox"] focus; mode "default"

    bindsym l exec $scripts/i3exit lock

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

for_window [window_role="pop-up"] floating enable
assign [class="wavebox"] workspace number 10
assign [class="spotify"] workspace number 9
assign [instance="ncmpcpp-player"] workspace number 9

workspace 1 output $primary
workspace 3 output $primary
workspace 5 output $primary
workspace 7 output $primary
workspace 2 output $secondary
workspace 4 output $secondary
workspace 6 output $secondary
workspace 8 output $secondary

# Required or configuration-related apps
exec --no-startup-id compton -b; sleep 1; $scripts/wallpaper
exec --no-startup-id "killall -q xcape; xcape -e \"Super_L=Hyper_L\""
exec --no-startup-id "killall -q xss-lock; xss-lock -- $scripts/i3exit lock&"
exec_always --no-startup-id "killall -q polybar; polybar main &"
exec_always --no-startup-id $scripts/autoname_workspaces
exec_always --no-startup-id $scripts/configure_displays

# Utils
exec --no-startup-id wavebox&
